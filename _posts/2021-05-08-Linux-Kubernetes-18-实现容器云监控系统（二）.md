---
layout: post
title: Linux-Kubernetes-18-实现容器云监控系统（二）
date: 2021-05-08
tags: 实战-Kubernetes
---

## 容器云监控Prometheus的概述

> Prometheus（普罗米修斯）是一个最初在SoundCloud上构建的监控系统。
>
> 自2012年成为社区开源项目，拥有非常活跃的开发人员和用户社区。为强调开源及独立维护。
>
> Prometheus于2016年加入CNCF，成为Kubernetes之后的第二个托管项目。
>
> [官网地址](https://Prometheus.io)
>
> [软件地址](https://github.com/prometheus)

## Prometheus的特点

- 多维数据模型：由度量名称和键值对标识的时间序列数据
- 内置时间列数据库：TSDB
- promQL：一种灵活的查询语言，可以利用多维数据完成复杂查询
- 基于HTTP的pull（拉取）方式采集时间序列数据（exporter）
- 同时支持PushGateway组件收集数据
- 通过服务发现或静态配置发现目标
- 多种图形模式及仪表盘支持
- 支持做为数据源接入Grafana

## Prometheus架构图

![](/images/posts/Linux-Kubernetes/Prometheus监控/1.png)

## Prometheus和Zabbix对比

| Prometheus                                                   | Zabbix                                                       |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 后端用golang语言开发，定制化难度较低                         | 后端用C语言开发，界面用PHP开发，定制化难度很高               |
| 更适合云环境的监控，尤其对k8s有着更好的支持                  | 更适合监控物理机、虚拟机环境、网络设备                       |
| 监控数据存储在基于时间序列的数据库内，便于对已有数据进行新的聚合 | 监控数据存储在关系型数据库内，如MySQL，很难从现有数据库中扩展维度 |
| 自身界面相对较弱，很多配置需要修改配置文件，但可以借由Grafana出图 | 图形化界面相对比较成熟，界面上基本能完成全部操作             |
| 支持更大的集群规模，速度也更快                               | 集群规模上限制为10000个节点                                  |
| 2015年后开始快速发展，社区活跃，适用场景越来越多             | 发展时间更长，对于很多监控场景都有现成的解决方案             |
